(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{"11b07":function(e,t,s){},"8b24":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-page",{staticClass:"flex-center"},[s("div",{staticClass:"padDiv"},[s("img",{staticStyle:{width:"100px",float:"left","margin-right":"20px"},attrs:{src:this.showImage}}),s("h5",[e._v("LOA Today")]),s("p",{staticStyle:{"text-indent":"0"}},[e._v(e._s(this.showDescription))]),s("playlist",{on:{nowPlaying:function(t){return e.isPlayerPlaying(t)}}})],1)])},n=[],a=s("ded3"),r=s.n(a),o=s("2f62"),l=s("bc3a"),d=s.n(l),p={data:function(){return{showDescription:this.$showDescription,showImage:this.$showImage,listener:{listener_id:0,listener_name:"Listener",date_last_logon:""},value:0,isNowPlaying:void 0}},components:{playlist:s("d122").default},computed:r()({},Object(o["c"])("modulePlayer",["getEpisode","getListener"])),created:function(){this.$q.localStorage.has("listener_id")&&(this.listener.listener_id=this.$q.localStorage.getItem("listener_id"),this.listener.password=this.$q.localStorage.getItem("password"),this.setListener(this.listener)),this.$q.localStorage.has("listener_id")||this.createListener()},methods:r()(r()({},Object(o["b"])("modulePlayer",["setEpisode","setListener"])),{},{createListener:function(){var e=this;d.a.post("api/listener/create.php",{listener_name:"Listener"}).then((function(t){e.listener.listener_id=t.data.listener_id,e.listener.listener_name=t.data.listener_name,e.listener.date_last_logon=t.data.date_last_logon,e.listener.password=t.data.password,e.setListener(e.listener),e.$q.localStorage.set("listener_id",e.listener.listener_id),e.$q.localStorage.set("password",e.listener.password)})).catch((function(e){console.log("createListener Axios Error: ",e)}))},isPlayerPlaying:function(e){this.isNowPlaying=0!==e}})},c=p,u=(s("f632"),s("2877")),h=s("9989"),m=s("eebe"),f=s.n(m),_=Object(u["a"])(c,i,n,!1,null,"35f4921e",null);t["default"]=_.exports;f()(_,"components",{QPage:h["a"]})},afab:function(e,t,s){},cccf:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("vue-plyr",{ref:"plyr"},[s("audio",{ref:"audio",attrs:{preload:"none"}},[s("source",{ref:"source",attrs:{src:e.mp3,type:"audio/mp3"}})])])],1)},n=[],a=(s("666c"),s("373e"),{name:"Player",props:{mp3:String},data:function(){return{}},computed:{player:function(){return this.$refs.plyr.player}},methods:{pause:function(){this.player.pause()},play:function(){this.player.play()}},mounted:function(){var e=this;this.player.on("playing",(function(){return e.$emit("playing")})),this.player.on("pause",(function(){return e.$emit("paused")})),this.player.on("timeupdate",(function(){return e.$emit("timeupdate",e.player.currentTime)})),this.player.on("ended",(function(){return e.$emit("ended",e.player.ended)}))}}),r=a,o=(s("e72c"),s("2877")),l=Object(o["a"])(r,i,n,!1,null,null,null);t["default"]=l.exports},d122:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",e._l(e.feed,(function(t){return s("div",{key:t.element},[0===t.element?s("div",{staticClass:"full-width",staticStyle:{height:"12px"}}):e._e(),s("hr"),s("h6",{staticClass:"pointer",on:{click:function(s){return e.startPlay(t.element)}}},[e._v(e._s(t.title))]),s("p",[s("span",{staticStyle:{color:"aqua"}},[e._v(e._s(t.date)+" – ")]),s("span",{directives:[{name:"linkified",rawName:"v-linkified"}],domProps:{innerHTML:e._s(t.description)}}),e._v("   "),s("span",{staticStyle:{color:"green"}},[e._v("Show #"+e._s(t.episodeNumber))])]),s("player",{key:e.callKey,ref:"pauseMe",refInFor:!0,attrs:{mp3:t.mp3},on:{ended:function(s){return e.episodeEnded(s,t.element)},timeupdate:function(s){return e.secondsOnPlayer(s,t.element)},playing:function(s){return e.playerPlaying(t,t.element)},paused:function(s){return e.playerPaused(t,t.element)}}}),s("net-status",{ref:"netStatus",refInFor:!0,attrs:{listener:e.listener,episode:t}})],1)})),0)},n=[],a=(s("a4d3"),s("e01a"),s("fb6a"),s("ac1f"),s("5319"),s("96cf"),s("c973")),r=s.n(a),o=s("ded3"),l=s.n(o),d=s("2b0e"),p=s("2f62"),c=s("bc3a"),u=s.n(c),h=s("c51a"),m=s.n(h),f=s("9aa5"),_=s.n(f),g=s("81c3");d["a"].directive("linkified",_.a);var y={props:{playlist:String},data:function(){return{feed:[],oldFeed:[],feedUpdated:!1,callKey:0,currentTime:0,duration:0,showDescription:"",showImage:"",oldElement:-1,newElement:0,elapsedTime:0,state:"",listener:{listener_id:0,listener_name:"Listener",date_last_logon:""},value:0,playerIsPlaying:0,newXml:""}},components:{player:s("cccf").default,"net-status":s("f12f").default},computed:l()({},Object(p["c"])("modulePlayer",["getEpisode","getListener"])),created:function(){this.$q.localStorage.has("listener_id")&&(this.listener.listener_id=this.$q.localStorage.getItem("listener_id"),this.listener.password=this.$q.localStorage.getItem("password"),this.setListener(this.listener),console.log("finished created in LOATodayPlaylist")),this.$q.localStorage.has("listener_id")||this.createListener()},mounted:function(){var e=this;this.getFeed();var t=g["a"].App,s=g["a"].BackgroundTask;t.addListener("appStateChange",(function(t){if(!t.isActive){var i=s.beforeExit(r()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.playerIsPlaying>0&&console.log("playing in background: true");case 1:case"end":return t.stop()}}),t)}))));0===e.playerIsPlaying&&(console.log("playing in background: false"),e.updateList(),s.finish({taskId:i}))}}))},methods:l()(l()({},Object(p["b"])("modulePlayer",["setEpisode","setListener"])),{},{checkList:function(){!0===this.feedUpdated&&this.updateList()},createListener:function(){var e=this;u.a.post("api/listener/create.php",{listener_name:"Listener"}).then((function(t){e.listener.listener_id=t.data.listener_id,e.listener.listener_name=t.data.listener_name,e.listener.date_last_logon=t.data.date_last_logon,e.listener.password=t.data.password,console.log("listener in createListener in LOATodayPlaylist: ",e.listener),e.setListener(e.listener),e.$q.localStorage.set("listener_id",e.listener.listener_id),e.$q.localStorage.set("password",e.listener.password)})).catch((function(e){console.log("createListener Axios Error: ",e)}))},episodeEnded:function(e,t){!0===this.feed[t].playing&&(this.feed[t].episodeEnded=e)},getFeed:function(){u.a.get("https://www.loatoday.net/feed/mp3").then((function(e){d["a"].prototype.$xml=m.a.xml2json(e.data,{compact:!1,spaces:1})})).catch((function(e){console.log("axios error in LOATodayPlaylist.vue: ",e)}));for(var e=JSON.parse(d["a"].prototype.$xml),t=e.elements[0].elements[0].elements.length,s="string",i="string",n="string",a=[],r="",o=0,l=0,p=5,c=21;c<Math.min(t,46);c++)s=e.elements[0].elements[0].elements[c].elements[10].elements[0].text,o=e.elements[0].elements[0].elements[c].elements[1].elements[0].text,"-"===o.substring(32,33)&&p--,o=o.substring(28,p+28),p++,l=e.elements[0].elements[0].elements[c].elements[11].elements[0].text,i=e.elements[0].elements[0].elements[c].elements[4].elements[0].cdata,n=e.elements[0].elements[0].elements[c].elements[6].attributes.url,r=Date.parse(e.elements[0].elements[0].elements[c].elements[2].elements[0].text),r=new Date(r).toDateString(),a.push({element:c-21,episodeNumber:l,title:s,description:i,mp3:n,date:r});this.showImage=e.elements[0].elements[0].elements[4].elements[0].elements[0].text,this.showDescription=e.elements[0].elements[0].elements[2].elements[0].text,this.feed=a,this.feed!=this.oldFeed&&(this.feedUpdated=!0),this.oldFeed=this.feed},playerPlaying:function(e,t){this.playerIsPlaying++,this.$emit("nowPlaying",this.playerIsPlaying),this.feed[t]=e,this.feed[t].playing=!0;var s=new Date(Date.now());s=this.timeZoneShift(s),s=s.replace("T"," "),this.feed[t].episode_date_started=s,this.feed[t].description=e.description,this.feed[t].element=e.element,this.feed[t].episode_title=e.title,this.feed[t].episode_number=e.number,this.feed[t].mp3=e.mp3,console.log("this.feed[index].mp3: ",this.feed[t].mp3),this.feed[t].date=e.date,this.setEpisode(this.feed),this.$refs.netStatus[t].updateListener(this.feed,t),e.element!=this.oldElement&&(this.newElement=e.element,-1!=this.oldElement&&this.$refs.pauseMe[this.oldElement].pause(),this.oldElement=this.newElement),console.log("playerPlaying at LOATodayPlaylist item: ",e)},playerPaused:function(e,t){this.playerIsPlaying--,this.$emit("nowPlaying",this.playerIsPlaying),this.feed[t].playing=!1,this.setEpisode(this.feed),this.$refs.netStatus[e.element].updateEpisode(this.feed,e.element),e.element!=this.oldElement&&(this.oldElement=this.newElement)},secondsOnPlayer:function(e,t){!0===this.feed[t].playing&&(this.feed[t].episode_time_start=e,this.feed[t].episode_time_update=e),!1===this.feed[t].playing&&(this.feed[t].episode_time_update=e)},startPlay:function(e){this.$refs.pauseMe[e].play()},timeZoneShift:function(e){var t=60*e.getTimezoneOffset()*1e3,s=e.getTime()-t,i=new Date(s),n=i.toISOString(),a=n.slice(0,19);return a},updateList:function(){0===this.playerIsPlaying&&(this.callKey+=1,console.log("updatedList"),this.getFeed(),this.feedUpdated=!1)}})},E=y,w=(s("e1dd"),s("2877")),b=Object(w["a"])(E,i,n,!1,null,"18f8c30d",null);t["default"]=b.exports},e1dd:function(e,t,s){"use strict";s("11b07")},e72c:function(e,t,s){"use strict";s("ef0a")},ef0a:function(e,t,s){},f12f:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div")},n=[],a=(s("fb6a"),s("ac1f"),s("5319"),s("ded3")),r=s.n(a),o=s("2b0e"),l=s("2f62"),d=s("bf4e"),p=s.n(d),c=s("bc3a"),u=s.n(c);o["a"].use(p.a);var h={name:"NetStatus",props:["listener","episode"],data:function(){return{currentListener:this.listener,currentEpisode:this.episode}},computed:r()({},Object(l["c"])("modulePlayer",["getEpisode","getListener"])),methods:r()(r()({},Object(l["b"])("modulePlayer",["setEpisode","setListener"])),{},{connCheck:function(){this.isOnline?console.log("You are now online."):console.log("You are now offline.")},createEpisode:function(e,t){var s=this;this.connCheck,this.currentEpisode=e[t],this.currentEpisode.episode_time_start=e[t].episode_time_start,u.a.post("api/episode/create.php",{listener_id:this.$q.localStorage.getItem("listener_id"),password:this.$q.localStorage.getItem("password"),episode_title:this.currentEpisode.episode_title,episode_number:this.currentEpisode.episodeNumber,episode_time_update:this.currentEpisode.episode_time_update,episode_time_start:this.currentEpisode.episode_time_start}).then((function(e){s.currentEpisode.episode_id=e.data.episode_id,s.currentEpisode.listener_id=e.data.listener_id,s.currentEpisode.episode_date_started=e.data.episode_date_started,s.currentEpisode.episode_title=e.data.episode_title,s.currentEpisode.episodeNumber=e.data.episode_number,s.currentEpisode.ip_address=e.data.ip_address,s.setEpisode(s.currentEpisode)})).catch((function(e){console.log("createEpisode Axios Error: ",e)}))},updateEpisode:function(e,t){var s=this,i=new Date(Date.now());i=this.timeZoneShift(i),i=i.replace("T"," "),this.getEpisode.episode_time_update<this.currentEpisode.episode_time_update&&this.setEpisode(this.currentEpisode.episode_time_update),console.log("this.currentEpisode in updateEpisode in NetStatus: ",this.currentEpisode),u.a.post("api/episode/update.php",{listener_id:this.$q.localStorage.getItem("listener_id"),password:this.$q.localStorage.getItem("password"),episode_id:this.currentEpisode.episode_id,episode_number:this.currentEpisode.episodeNumber,episode_title:this.currentEpisode.episode_title,episode_time_start:this.currentEpisode.episode_time_start,episode_time_update:this.currentEpisode.episode_time_update,episode_date_stopped:i}).then((function(e){s.currentEpisode.episode_date_stopped=e.data.episode_date_stopped,s.setEpisode(s.currentEpisode)})).catch((function(e){console.log("updateEpisode Axios Error: ",e)}))},updateListener:function(e,t){var s=this,i=new Date(Date.now());i=this.timeZoneShift(i),i=i.replace("T"," "),u.a.post("api/listener/update.php",{listener_id:this.$q.localStorage.getItem("listener_id"),listener_name:this.currentListener.listener_name,password:this.$q.localStorage.getItem("password"),date_last_logon:i}).then((function(e){s.currentListener.listener_id=e.data.listener_id,s.currentListener.listener_name=e.data.listener_name,s.currentListener.date_last_logon=e.data.date_last_logon,s.setListener(s.currentListener),console.log("response.data in updateListener in NetStatus: ",e.data)})).catch((function(e){console.log("updateListener Axios Error: ",e)})),this.createEpisode(e,t)},timeZoneShift:function(e){var t=60*e.getTimezoneOffset()*1e3,s=e.getTime()-t,i=new Date(s),n=i.toISOString(),a=n.slice(0,19);return a}})},m=h,f=s("2877"),_=Object(f["a"])(m,i,n,!1,null,"1b8fee90",null);t["default"]=_.exports},f632:function(e,t,s){"use strict";s("afab")}}]);