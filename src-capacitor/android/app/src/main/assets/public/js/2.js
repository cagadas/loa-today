(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{"3d09":function(e,t,s){"use strict";var i=s("c8cb"),n=s.n(i);n.a},"8b24":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-page",{staticClass:"flex-center"},[s("div",{staticClass:"padDiv"},[s("img",{staticStyle:{width:"100px",float:"left","margin-right":"20px"},attrs:{src:this.showImage}}),s("h5",[e._v("LOA Today")]),s("p",{staticStyle:{"text-indent":"0"}},[e._v(e._s(this.showDescription))]),s("playlist",{on:{nowPlaying:function(t){return e.isPlayerPlaying(t)}}})],1)])},n=[],a=s("ded3"),r=s.n(a),l=s("2f62"),o=s("bc3a"),d=s.n(o),p={data(){return{showDescription:this.$showDescription,showImage:this.$showImage,listener:{listener_id:0,listener_name:"Listener",date_last_logon:""},value:0,isNowPlaying:void 0}},components:{playlist:s("d122").default},computed:r()({},Object(l["c"])("modulePlayer",["getEpisode","getListener"])),created(){this.$q.localStorage.has("listener_id")&&(this.listener.listener_id=this.$q.localStorage.getItem("listener_id"),this.listener.password=this.$q.localStorage.getItem("password"),this.setListener(this.listener)),this.$q.localStorage.has("listener_id")||this.createListener()},methods:r()(r()({},Object(l["b"])("modulePlayer",["setEpisode","setListener"])),{},{createListener(){d.a.post("api/listener/create.php",{listener_name:"Listener"}).then((e=>{this.listener.listener_id=e.data.listener_id,this.listener.listener_name=e.data.listener_name,this.listener.date_last_logon=e.data.date_last_logon,this.listener.password=e.data.password,this.setListener(this.listener),this.$q.localStorage.set("listener_id",this.listener.listener_id),this.$q.localStorage.set("password",this.listener.password)})).catch((function(e){console.log("createListener Axios Error: ",e)}))},isPlayerPlaying(e){this.isNowPlaying=0!==e}})},c=p,h=(s("a884"),s("2877")),m=s("9989"),u=s("eebe"),_=s.n(u),f=Object(h["a"])(c,i,n,!1,null,"12f8f21b",null);t["default"]=f.exports;_()(f,"components",{QPage:m["a"]})},a884:function(e,t,s){"use strict";var i=s("ea6c"),n=s.n(i);n.a},c8cb:function(e,t,s){},cccf:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("vue-plyr",{ref:"plyr"},[s("audio",{ref:"audio",attrs:{preload:"none"}},[s("source",{ref:"source",attrs:{src:e.mp3,type:"audio/mp3"}})])])],1)},n=[],a=s("c973"),r=s.n(a),l=s("81c3");const{App:o,BackgroundTask:d}=l["a"];o.addListener("appStateChange",(e=>{if(!e.isActive){let e=d.beforeExit(r()((function*(){for(var t=(new Date).getTime(),s=0;s<1e18;s++)if((new Date).getTime()-t>3e5)break;d.finish({taskId:e})})))}}));var p={name:"Player",props:{mp3:String},data(){return{}},computed:{player(){return this.$refs.plyr.player}},methods:{pause(){this.player.pause()},play(){this.player.play()}},mounted(){this.player.on("playing",(()=>this.$emit("playing"))),this.player.on("pause",(()=>this.$emit("paused"))),this.player.on("timeupdate",(()=>this.$emit("timeupdate",this.player.currentTime)))}},c=p,h=(s("e72c"),s("2877")),m=Object(h["a"])(c,i,n,!1,null,null,null);t["default"]=m.exports},d122:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticStyle:{margin:"0 auto",width:"150px"}},[s("q-btn",{staticClass:"glossy full-width",attrs:{rounded:"",color:"secondary",label:"Update List"},on:{click:e.updateList}})],1),e._l(e.feed,(function(t){return s("div",{key:t.element},[0===t.element?s("div",{staticClass:"full-width",staticStyle:{height:"12px"}}):e._e(),s("hr"),s("h6",{staticClass:"pointer",on:{click:function(s){return e.startPlay(t.element)}}},[e._v(e._s(t.title))]),s("p",[s("span",{staticStyle:{color:"aqua"}},[e._v(e._s(t.date)+" – ")]),s("span",{directives:[{name:"linkified",rawName:"v-linkified"}],domProps:{innerHTML:e._s(t.description)}}),e._v("   "),s("span",{staticStyle:{color:"green"}},[e._v("Show #"+e._s(t.episodeNumber))])]),s("player",{key:e.callKey,ref:"pauseMe",refInFor:!0,attrs:{mp3:t.mp3},on:{timeupdate:function(s){return e.secondsOnPlayer(s,t.element)},playing:function(s){return e.playerPlaying(t,t.element)},paused:function(s){return e.playerPaused(t,t.element)}}}),s("net-status",{ref:"netStatus",refInFor:!0,attrs:{listener:e.listener,episode:t}})],1)}))],2)},n=[],a=(s("e01a"),s("fb6a"),s("5319"),s("ded3")),r=s.n(a),l=s("2b0e"),o=s("2f62"),d=s("bc3a"),p=s.n(d),c=s("646b"),h=s("c51a"),m=s.n(h),u=s("9aa5"),_=s.n(u);l["a"].directive("linkified",_.a);var f={props:{playlist:String},mixins:[c["a"]],data(){return{feed:[],oldFeed:[],feedUpdated:!1,callKey:0,showDescription:"",showImage:"",oldElement:-1,newElement:0,elapsedTime:0,state:"",listener:{listener_id:0,listener_name:"Listener",date_last_logon:""},value:0,playerIsPlaying:0,newXml:""}},components:{player:s("cccf").default,"net-status":s("f12f").default},computed:r()({},Object(o["c"])("modulePlayer",["getEpisode","getListener"])),created(){this.$q.localStorage.has("listener_id")&&(this.listener.listener_id=this.$q.localStorage.getItem("listener_id"),this.listener.password=this.$q.localStorage.getItem("password"),this.setListener(this.listener),console.log("finished created in LOATodayPlaylist")),this.$q.localStorage.has("listener_id")||this.createListener()},cron:{time:6e4,method:"checkList"},mounted(){this.getFeed()},methods:r()(r()({},Object(o["b"])("modulePlayer",["setEpisode","setListener"])),{},{checkList(){!0===this.feedUpdated&&this.updateList()},createListener(){p.a.post("api/listener/create.php",{listener_name:"Listener"}).then((e=>{this.listener.listener_id=e.data.listener_id,this.listener.listener_name=e.data.listener_name,this.listener.date_last_logon=e.data.date_last_logon,this.listener.password=e.data.password,console.log("listener in createListener in LOATodayPlaylist: ",this.listener),this.setListener(this.listener),this.$q.localStorage.set("listener_id",this.listener.listener_id),this.$q.localStorage.set("password",this.listener.password)})).catch((function(e){console.log("createListener Axios Error: ",e)}))},getFeed(){p.a.get("https://www.loatoday.net/feed/mp3").then((e=>{l["a"].prototype.$xml=m.a.xml2json(e.data,{compact:!1,spaces:1})})).catch((function(e){console.log("axios error in LOATodayPlaylist.vue: ",e)}));let e=JSON.parse(l["a"].prototype.$xml),t=e.elements[0].elements[0].elements.length,s="string",i="string",n="string",a=[],r="",o=0,d=0,c=5;for(let l=21;l<Math.min(t,46);l++)s=e.elements[0].elements[0].elements[l].elements[10].elements[0].text,o=e.elements[0].elements[0].elements[l].elements[1].elements[0].text,"-"===o.substring(32,33)&&c--,o=o.substring(28,c+28),c++,d=e.elements[0].elements[0].elements[l].elements[11].elements[0].text,i=e.elements[0].elements[0].elements[l].elements[4].elements[0].cdata,n=e.elements[0].elements[0].elements[l].elements[6].attributes.url,r=Date.parse(e.elements[0].elements[0].elements[l].elements[2].elements[0].text),r=new Date(r).toDateString(),a.push({element:l-21,episodeNumber:d,title:s,description:i,mp3:n,date:r});this.showImage=e.elements[0].elements[0].elements[4].elements[0].elements[0].text,this.showDescription=e.elements[0].elements[0].elements[2].elements[0].text,this.feed=a,this.feed!=this.oldFeed&&(this.feedUpdated=!0),this.oldFeed=this.feed},playerPlaying(e,t){this.playerIsPlaying++,this.$emit("nowPlaying",this.playerIsPlaying),this.feed[t]=e,this.feed[t].playing=!0;let s=new Date(Date.now());s=this.timeZoneShift(s),s=s.replace("T"," "),this.feed[t].episode_date_started=s,this.feed[t].description=e.description,this.feed[t].element=e.element,this.feed[t].episode_title=e.title,this.feed[t].episode_number=e.number,this.feed[t].mp3=e.mp3,console.log("this.feed[index].mp3: ",this.feed[t].mp3),this.feed[t].date=e.date,this.setEpisode(this.feed),this.$refs.netStatus[t].updateListener(this.feed,t),e.element!=this.oldElement&&(this.newElement=e.element,-1!=this.oldElement&&this.$refs.pauseMe[this.oldElement].pause(),this.oldElement=this.newElement),console.log("playerPlaying at LOATodayPlaylist item: ",e),console.log("playerPlaying at LOATodayPlaylist index: ",t)},playerPaused(e,t){this.playerIsPlaying--,this.$emit("nowPlaying",this.playerIsPlaying),this.feed[t].playing=!1,this.setEpisode(this.feed),this.$refs.netStatus[e.element].updateEpisode(this.feed,e.element),e.element!=this.oldElement&&(this.oldElement=this.newElement)},secondsOnPlayer(e,t){!0===this.feed[t].playing&&(this.feed[t].episode_time_start=e,this.feed[t].episode_time_update=e),!1===this.feed[t].playing&&(this.feed[t].episode_time_update=e)},startPlay(e){this.$refs.pauseMe[e].play()},timeZoneShift(e){const t=60*e.getTimezoneOffset()*1e3,s=e.getTime()-t,i=new Date(s),n=i.toISOString(),a=n.slice(0,19);return a},updateList(){0===this.playerIsPlaying&&(this.callKey+=1,console.log("updatedList"),this.getFeed(),this.feedUpdated=!1)}})},g=f,y=(s("3d09"),s("2877")),w=s("9c40"),E=s("eebe"),b=s.n(E),L=Object(y["a"])(g,i,n,!1,null,"6d8b7509",null);t["default"]=L.exports;b()(L,"components",{QBtn:w["a"]})},e72c:function(e,t,s){"use strict";var i=s("ef0a"),n=s.n(i);n.a},ea6c:function(e,t,s){},ef0a:function(e,t,s){},f12f:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div")},n=[],a=(s("fb6a"),s("5319"),s("ded3")),r=s.n(a),l=s("2b0e"),o=s("2f62"),d=s("bf4e"),p=s.n(d),c=s("bc3a"),h=s.n(c);l["a"].use(p.a);var m={name:"NetStatus",props:["listener","episode"],data(){return{currentListener:this.listener,currentEpisode:this.episode}},computed:r()({},Object(o["c"])("modulePlayer",["getEpisode","getListener"])),methods:r()(r()({},Object(o["b"])("modulePlayer",["setEpisode","setListener"])),{},{connCheck(){this.isOnline?console.log("You are now online."):console.log("You are now offline.")},createEpisode(e,t){this.connCheck,this.currentEpisode=e[t],this.currentEpisode.episode_time_start=e[t].episode_time_start,h.a.post("api/episode/create.php",{listener_id:this.$q.localStorage.getItem("listener_id"),password:this.$q.localStorage.getItem("password"),episode_title:this.currentEpisode.episode_title,episode_number:this.currentEpisode.episodeNumber,episode_time_update:this.currentEpisode.episode_time_update,episode_time_start:this.currentEpisode.episode_time_start}).then((e=>{this.currentEpisode.episode_id=e.data.episode_id,this.currentEpisode.listener_id=e.data.listener_id,this.currentEpisode.episode_date_started=e.data.episode_date_started,this.currentEpisode.episode_title=e.data.episode_title,this.currentEpisode.episodeNumber=e.data.episode_number,this.currentEpisode.ip_address=e.data.ip_address,this.setEpisode(this.currentEpisode)})).catch((function(e){console.log("createEpisode Axios Error: ",e)}))},updateEpisode(e,t){let s=new Date(Date.now());s=this.timeZoneShift(s),s=s.replace("T"," "),this.getEpisode.episode_time_update<this.currentEpisode.episode_time_update&&this.setEpisode(this.currentEpisode.episode_time_update),console.log("this.currentEpisode in updateEpisode in NetStatus: ",this.currentEpisode),h.a.post("api/episode/update.php",{listener_id:this.$q.localStorage.getItem("listener_id"),password:this.$q.localStorage.getItem("password"),episode_id:this.currentEpisode.episode_id,episode_number:this.currentEpisode.episodeNumber,episode_title:this.currentEpisode.episode_title,episode_time_start:this.currentEpisode.episode_time_start,episode_time_update:this.currentEpisode.episode_time_update,episode_date_stopped:s}).then((e=>{this.currentEpisode.episode_date_stopped=e.data.episode_date_stopped,this.setEpisode(this.currentEpisode)})).catch((function(e){console.log("updateEpisode Axios Error: ",e)}))},updateListener(e,t){let s=new Date(Date.now());s=this.timeZoneShift(s),s=s.replace("T"," "),h.a.post("api/listener/update.php",{listener_id:this.$q.localStorage.getItem("listener_id"),listener_name:this.currentListener.listener_name,password:this.$q.localStorage.getItem("password"),date_last_logon:s}).then((e=>{this.currentListener.listener_id=e.data.listener_id,this.currentListener.listener_name=e.data.listener_name,this.currentListener.date_last_logon=e.data.date_last_logon,this.setListener(this.currentListener),console.log("response.data in updateListener in NetStatus: ",e.data)})).catch((function(e){console.log("updateListener Axios Error: ",e)})),this.createEpisode(e,t)},timeZoneShift(e){const t=60*e.getTimezoneOffset()*1e3,s=e.getTime()-t,i=new Date(s),n=i.toISOString(),a=n.slice(0,19);return a}})},u=m,_=s("2877"),f=Object(_["a"])(u,i,n,!1,null,"7118a7b6",null);t["default"]=f.exports}}]);